<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âœ¨ cool website âœ¨</title>
    <link rel="icon" href="https://i.pinimg.com/236x/33/37/04/33370449505bdcd2c6f2ccdaf375692f.jpg">
    <style>
        /* [Previous CSS remains the same until the end] */
        
        /* Ban Message Styles */
        .ban-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 30px;
            max-width: 600px;
            margin: 50px auto;
            text-align: center;
            font-family: 'Pacifico', cursive;
            color: #5B3A29;
            border: 3px solid #ff69b4;
            box-shadow: 0 0 20px rgba(255, 105, 180, 0.3);
        }
        
        .ban-title {
            font-size: 2.5em;
            color: #ff69b4;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .ban-mascot {
            width: 150px;
            margin: 20px auto;
            animation: bounce 2s infinite;
        }
        
        .appeal-button {
            background-color: #ffcc99;
            border: none;
            padding: 12px 25px;
            font-size: 18px;
            font-family: 'Pacifico', cursive;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
            box-shadow: 0 4px 8px rgba(255, 153, 102, 0.3);
        }
        
        .appeal-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(255, 153, 102, 0.4);
        }
        
        .ban-countdown {
            font-size: 1.2em;
            margin: 15px 0;
            color: #D2691E;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
    </style>
</head>
<body>
    <!-- [Previous HTML remains the same until the script section] -->

    <script>
        // Ban System Constants
        const VIOLATION_LEVELS = [
            { violations: 3,  banDuration: 1 * 60 * 60 * 1000 },    // 1 hour
            { violations: 5,  banDuration: 24 * 60 * 60 * 1000 },   // 1 day
            { violations: 10, banDuration: 7 * 24 * 60 * 60 * 1000 } // 1 week
        ];
        const BAN_KEY = 'user_banned_until';
        const VIOLATION_KEY = 'user_violations';
        const APPEAL_KEY = 'ban_appeal_pending';
        const APPEAL_COOLDOWN = 12 * 60 * 60 * 1000; // 12 hours
        
        // Enhanced Ban Check
        function checkBanStatus() {
            const bannedUntil = localStorage.getItem(BAN_KEY);
            const appealPending = localStorage.getItem(APPEAL_KEY);
            
            if (bannedUntil && Date.now() < parseInt(bannedUntil)) {
                // Calculate time remaining
                const remaining = parseInt(bannedUntil) - Date.now();
                const hours = Math.floor(remaining / (1000 * 60 * 60));
                const minutes = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
                
                // Create cute ban message
                document.body.innerHTML = `
                    <div class="ban-container">
                        <img src="https://i.pinimg.com/236x/8a/5b/1d/8a5b1d5a6a3e9e8f0e6e3e8f3e8f3e8f.jpg" class="ban-mascot" alt="Sad Sanrio Character">
                        <h1 class="ban-title">â›” Oh no! â›”</h1>
                        <p>You've been temporarily banned for not following our rules.</p>
                        
                        <div class="ban-countdown">
                            ${hours > 0 ? `${hours} hour${hours !== 1 ? 's' : ''} and ` : ''}
                            ${minutes} minute${minutes !== 1 ? 's' : ''} remaining
                        </div>
                        
                        ${appealPending ? `
                            <p>Your appeal is being reviewed by our cute staff!</p>
                            <p>Check back later~</p>
                        ` : `
                            <p>Think this was a mistake?</p>
                            <button class="appeal-button" onclick="submitAppeal()">
                                âœ¨ Appeal Ban âœ¨
                            </button>
                        `}
                        
                        <p style="margin-top: 30px; font-size: 0.8em;">
                            Remember to be kind to everyone! ðŸ’–
                        </p>
                    </div>
                `;
                return true;
            }
            return false;
        }
        
        // Appeal System
        function submitAppeal() {
            localStorage.setItem(APPEAL_KEY, "true");
            localStorage.setItem(BAN_KEY, (Date.now() + APPEAL_COOLDOWN).toString());
            
            // In a real system, you would send this to a server
            console.log("Ban appeal submitted!");
            
            // Show confirmation
            document.querySelector('.ban-container').innerHTML = `
                <img src="https://i.pinimg.com/474x/1e/a0/fc/1ea0fc67b8b4de5751131623047d7a0d.jpg" class="ban-mascot" alt="Happy Sanrio Character">
                <h1 class="ban-title">Appeal Received!</h1>
                <p>Your appeal has been sent to our team of cute moderators!</p>
                <p>We'll review it within 12 hours~</p>
                <p>ðŸ’– Thank you for your patience! ðŸ’–</p>
            `;
        }
        
        // Enhanced Violation Tracking
        function trackViolation() {
            let violations = parseInt(localStorage.getItem(VIOLATION_KEY)) || 0;
            violations++;
            localStorage.setItem(VIOLATION_KEY, violations.toString());
            
            // Check if this violation triggers a new ban level
            for (const level of VIOLATION_LEVELS) {
                if (violations === level.violations) {
                    const banUntil = Date.now() + level.banDuration;
                    localStorage.setItem(BAN_KEY, banUntil.toString());
                    checkBanStatus(); // Immediately enforce ban
                    return true;
                }
            }
            return false;
        }
        
        // [Modified saveMessage function]
        function saveMessage() {
            if (checkBanStatus()) return;
            
            // [Previous message validation code...]
            
            if (containsBadWord) {
                const wasBanned = trackViolation();
                if (!wasBanned) {
                    const nextBanLevel = VIOLATION_LEVELS.find(level => 
                        (parseInt(localStorage.getItem(VIOLATION_KEY)) || 0) < level.violations
                    );
                    const warningsLeft = nextBanLevel.violations - (parseInt(localStorage.getItem(VIOLATION_KEY)) || 0);
                    
                    alert(`Oopsie! That word isn't allowed~ 
(${warningsLeft} more ${warningsLeft === 1 ? 'warning' : 'warnings'} until ${formatDuration(nextBanLevel.banDuration)} ban)`);
                }
                return;
            }
            
            // [Rest of saveMessage remains the same]
        }
        
        // Helper function to format duration
        function formatDuration(ms) {
            const days = Math.floor(ms / (1000 * 60 * 60 * 24));
            const hours = Math.floor((ms % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            
            if (days > 0) return `${days} day${days !== 1 ? 's' : ''}`;
            if (hours > 0) return `${hours} hour${hours !== 1 ? 's' : ''}`;
            return "a short while";
        }
        
        // [Rest of your existing JavaScript...]
    </script>
</body>
</html>
