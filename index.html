<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>✨ chiikawa dreamsite ✨</title>
  <link rel="icon" href="https://i.pinimg.com/736x/7b/d7/ab/7bd7abb603e35feb41528cb3af4534f1.jpg" type="image/jpeg" />

  <style>
    :root {
      --pink: #fecde0;
      --peach: #faefd9;
      --blue: #dfebfd;
      --lavender: #ffdef1;
      --font-main: 'Comic Neue', cursive;
      --shadow-pink: rgba(255, 182, 193, 0.4);
      --primary-text: #c71585;
      --background-light: #fff8fc;
      --button-pink: #ffb6c1;
      --button-hover: #ff69b4;
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: var(--font-main);
      background: linear-gradient(135deg, var(--pink), var(--peach), var(--blue), var(--lavender));
      background-size: 400% 400%;
      animation: gradient 20s ease infinite;
      overflow-x: hidden;
      transition: background 0.3s ease;
    }
    @keyframes gradient {
      0% {background-position:0% 50%;}
      50% {background-position:100% 50%;}
      100% {background-position:0% 50%;}
    }
    body.dark {
      background: #1a1a2e;
      color: white;
    }
    body.dark section {
      background: #2e2e4d;
    }
    header {
      position: sticky;
      top: 0;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      padding: 1.2rem 1rem;
      border-bottom: 2px solid #ffb6c1;
      z-index: 10;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    header h1 {
      font-size: clamp(1.8rem, 5vw, 2.2rem);
      color: var(--primary-text);
      animation: bounce 2s infinite;
      margin-bottom: 0.8rem;
    }
    @keyframes bounce {
      0%,100% {transform: translateY(0);}
      50% {transform: translateY(-10px);}
    }
    nav {
      display: flex;
      justify-content: center;
      gap: 0.8rem;
      flex-wrap: wrap;
      width: 100%;
      max-width: 800px;
    }
    nav a {
      text-decoration: none;
      color: #d63384;
      background: #fff0f5;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px var(--shadow-pink);
      font-size: clamp(0.8rem, 2.5vw, 0.9rem);
    }
    nav a:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 15px rgba(255,182,193,0.6);
    }
    section {
      max-width: 1100px;
      margin: 3rem auto;
      padding: 2rem;
      background: var(--background-light);
      border-radius: 20px;
      box-shadow: 0 8px 20px var(--shadow-pink);
      opacity: 0;
      transform: translateY(30px);
      transition: opacity 0.8s ease, transform 0.8s ease;
    }
    section.visible {
      opacity: 1;
      transform: translateY(0);
    }
    section h2 {
      text-align: center;
      font-size: clamp(1.5rem, 4vw, 2rem);
      color: var(--primary-text);
      margin-bottom: 1.5rem;
    }
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 2rem;
      justify-items: center;
    }
    .card {
      background: #fff0f8;
      padding: 1rem;
      border-radius: 16px;
      box-shadow: 0 6px 18px var(--shadow-pink);
      text-align: center;
      animation: cardPop 0.5s ease-in-out;
      width: 100%;
      max-width: 300px;
    }
    @keyframes cardPop {
      0% { transform: scale(0.8); opacity: 0; }
      100% { transform: scale(1); opacity: 1; }
    }
    .card img {
      width: 100%;
      max-width: 240px;
      height: 240px;
      object-fit: cover;
      display: block;
      margin: 0 auto;
      border-radius: 12px;
      margin-bottom: 1rem;
      border: 3px solid #ffb6c1;
    }
    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-width: 500px;
      margin: 0 auto;
    }
    form input, form textarea {
      padding: 0.8rem;
      border-radius: 12px;
      border: 2px solid #ffd6e8;
      font-family: var(--font-main);
      font-size: 1rem;
    }
    form button {
      background: var(--button-pink);
      color: white;
      border: none;
      padding: 1rem;
      font-size: 1.1rem;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 6px 18px var(--shadow-pink);
    }
    form button:hover {
      background: var(--button-hover);
      box-shadow: 0 8px 25px rgba(255,105,180,0.9);
    }
    footer {
      text-align: center;
      padding: 3rem 1rem;
      font-size: 0.9rem;
      color: #888;
    }
    #themeToggle {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      font-size: 26px;
      color: white;
      cursor: pointer;
      border-radius: 50%;
      border: none;
      background: #ffb6c1;
    }
    #muteBtn, #pauseBtn {
      width: 40px;
      height: 40px;
      font-size: 20px;
      color: #c71585;
      cursor: pointer;
      border-radius: 50%;
      border: none;
      background: #ffd6e8;
      transition: background 0.3s ease;
      margin-right: 10px;
    }
    #muteBtn:hover, #pauseBtn:hover {
      background: var(--button-hover);
    }
    .controls {
      display: flex;
      align-items: center;
      position: absolute;
      left: 1rem;
    }
    #volumeSlider {
      width: 100px;
      height: 30px;
      -webkit-appearance: none;
      appearance: none;
      background: #ffd6e8;
      border-radius: 15px;
      outline: none;
      cursor: pointer;
      vertical-align: middle;
    }
    #volumeSlider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 20px;
      height: 20px;
      background: url('https://i.pinimg.com/736x/2f/a6/38/2fa63889fb076947de294c8348e836bf.jpg') no-repeat center;
      background-size: cover;
      border-radius: 50%;
      cursor: pointer;
    }
    #volumeSlider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      background: url('https://i.pinimg.com/736x/2f/a6/38/2fa63889fb076947de294c8348e836bf.jpg') no-repeat center;
      background-size: cover;
      border-radius: 50%;
      cursor: pointer;
    }
    .floating-up-img {
      position: fixed;
      width: 70px;
      height: 70px;
      pointer-events: none;
      user-select: none;
      z-index: 1000;
      border-radius: 12px;
      filter: drop-shadow(0 0 3px #ffb6c1);
    }
    .floating-up-img.hidden {
      display: none;
    }
    .description-text {
      text-align: center;
      font-size: 1.2rem;
      color: var(--primary-text);
      margin-bottom: 2rem;
      line-height: 1.6;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    .rainbow-text {
      background: linear-gradient(to right, #ff6b6b, #ff8e53, #ffeb3b, #66ff66, #4facfe, #b267e6);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-weight: bold;
    }
    .gallery-item {
      background: #fff0f8;
      padding: 1rem;
      border-radius: 16px;
      box-shadow: 0 6px 18px var(--shadow-pink);
      text-align: center;
      width: 100%;
      max-width: 300px;
    }
    .gallery-item img {
      width: 100%;
      max-width: 240px;
      height: 240px;
      object-fit: cover;
      display: block;
      margin: 0 auto;
      border-radius: 12px;
      border: 3px solid #ffb6c1;
    }
    .game-item {
      background: #fff0f8;
      padding: 1.5rem;
      border-radius: 16px;
      box-shadow: 0 6px 18px var(--shadow-pink);
      text-align: center;
      width: 100%;
      max-width: 300px;
    }
    .game-button {
      background: var(--button-pink);
      color: white;
      border: none;
      padding: 0.8rem 1.5rem;
      font-size: 1rem;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.3s ease, box-shadow 0.3s ease;
      box-shadow: 0 6px 18px var(--shadow-pink);
      font-family: var(--font-main);
      font-weight: bold;
      margin: 1rem auto;
      display: block;
    }
    .game-button:disabled {
      background: #ccc;
      cursor: not-allowed;
      box-shadow: none;
    }
    .game-button:hover:enabled {
      background: var(--button-hover);
      box-shadow: 0 8px 25px rgba(255,105,180,0.9);
    }
    .memory-game {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
      max-width: 300px;
      margin: 1rem auto;
    }
    .memory-card {
      width: 60px;
      height: 60px;
      background: #ffb6c1;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      cursor: pointer;
      transition: all 0cza.3s ease;
    }
    .memory-card.flipped {
      background: #fff0f8;
      transform: rotateY(180deg);
    }
    .memory-card.matched {
      background: #90EE90;
      cursor: default;
    }
    .quiz-option {
      background: #fff0f8;
      padding: 0.8rem;
      margin: 0.5rem 0;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s ease;
      border: 2px solid #ffb6c1;
    }
    .quiz-option:hover {
      background: #ffb6c1;
      color: white;
    }
    .quiz-option.correct {
      background: #90EE90;
      color: #006400;
    }
    .quiz-option.wrong {
      background: #FFB6C1;
      color: #8B0000;
    }
    #clickTarget img {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      border: 2px solid #ffb6c1;
    }
    .puzzle-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 5px;
      max-width: 300px;
      margin: 1rem auto;
    }
    .puzzle-piece {
      width: 100px;
      height: 100px;
      background-size: 300px 300px;
      border-radius: 8px;
      cursor: pointer;
      border: 2px solid #ffb6c1;
    }
    .puzzle-piece.correct {
      border: 2px solid #90EE90;
    }
    .puzzle-piece.empty {
      background: #ccc;
      border: 2px solid #ccc;
    }
    .catch-container {
      position.ScenegraphNode2D relative;
      height: 200px;
      background: #fff0f8;
      border-radius: 12px;
      margin: 1rem 0;
      overflow: hidden;
    }
    .catch-character {
      position: absolute;
      width: 40px;
      height: 40px;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .catch-character img {
      width: 100%;
      border-radius: 8px;
      border: 2px solid #ffb6c1;
    }
    .catch-score {
      margin: 1rem 0;
      text-align: center;
    }
    @media (max-width: 600px) {
      header {
        padding: 1rem 0.5rem;
      }
      nav {
        gap: 0.5rem;
      }
      nav a {
        padding: 0.4rem 0.8rem;
        font-size: 0.8rem;
      }
      section {
        margin: 1.5rem;
        padding: 1.5rem;
      }
      .card-grid {
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1.5rem;
      }
      .card, .gallery-item, .game-item {
        max-width: 200px;
      }
      .card img, .gallery-item img {
        max-width: 180px;
        height: 180px;
      }
    }
  </style>
</head>
<body>
<header>
  <div class="controls">
    <button id="muteBtn" title="mute music">🔇</button>
    <button id="pauseBtn" title="pause music">⏸️</button>
    <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="0.5">
  </div>
  <h1>🌟 welcome to chiikawa dreamland! 🌟</h1>
  <nav>
    <a href="#description">about</a>
    <a href="#stars">stars</a>
    <a href="#gallery">gallery</a>
    <a href="#games">games</a>
    <a href="#contact">contact</a>
  </nav>
</header>

<section id="about">
  <div id="description">
    <h2>✨ about chiikawa dreamland ✨</h2>
    <div class="description-text">
      welcome to the most magical corner of the internet where cuteness meets pure joy! ✨ this <span class="rainbow-text">dreamy</span> space is dedicated to celebrating the adorable world of chiikawa and friends. here you'll discover the sweetest characters that fill our hearts with soft happiness and sparkly giggles. each little friend brings their own special magic to this kawaii universe! 🌟💖
    </div>
  </div>
</section>

<section id="stars">
  <h2>🌟 our sweetest little stars 🌟</h2>
  <div class="card-grid">
    <div class="card">
      <img src="https://i.pinimg.com/736x/9e/d2/57/9ed25718190fc277a34354760c69a021.jpg" alt="chiikawa" />
      <h3>chiikawa</h3>
      <p>our sweet little joy with sparkle eyes 🍥</p>
    </div>
    <div class="card">
      <img src="https://i.pinimg.com/736x/6a/1c/e9/6a1ce9ce3d1a90e67ab13800e597c716.jpg" alt="hachiware" />
      <h3>hachiware</h3>
      <p>silly friend full of giggles and glitter 🎀</p>
    </div>
    <div class="card">
      <img src="https://i.pinimg.com/736x/03/71/15/037115114426adef9e7fe7bf67523e79.jpg" alt="usagi" />
      <h3>usagi</h3>
      <p>bouncy bunny who brings the party 🎉🐰</p>
    </div>
    <div class="card">
      <img src="https://i.pinimg.com/736x/52/7b/de/527bde1287250b840f4f40e7a885e426.jpg" alt="momonga" />
      <h3>momonga</h3>
      <p>cheeky squirrel who always wants attention 🐿️</p>
    </div>
    <div class="card">
      <img src="https://i.namu.wiki/i/EqejW1MYM4pbZiWoKWTTV_cFNNoHXH_Voz6qNMt9D0nVTJezg94dSdb0l6JTwLFLrmUM8UWU5ySngRLH2_PVEA.webp" alt="rakko" />
      <h3>rakko</h3>
      <p>relaxed otter with stylish vibes and floaties 🦦🌊</p>
    </div>
    <div class="card">
      <img src="https://i.namu.wiki/i/Mw9CSw9T1JoRO9mMVAJhATgD2q2sSLWwYpSr2Y9H7bwJy3alTbg51RoUVYgIDWrBIB-ubbXaJtirtsy1ZNMaDA.webp" alt="kuri manjū" />
      <h3>kuri manjū</h3>
      <p>mysterious bean bun with fluffy wisdom 🍠✨</p>
    </div>
    <div class="card">
      <img src="https://i.namu.wiki/i/g-JWrIc1FVpFpu_OjILzJwt5Gl8yghQRJJ0ZE9GCJESwI3Kqrn3jIc-ZNnxgLRsGZYm8S1wC6mANaVNyEBLwIg.webp" alt="shisa" />
      <h3>shisa</h3>
      <p>ramen guardian lion with a loyal heart 🍜💅</p>
    </div>
    <div class="card">
      <img src="https://i.pinimg.com/736x/64/1f/21/641f21db87eb9cea11c7b0d7b45ff0cb.jpg" alt="kani" />
      <h3>kani</h3>
      <p>snappy crab with rhythm and cute claws 🦀🎶</p>
    </div>
    <div class="card">
      <img src="https://i.pinimg.com/736x/f3/dd/ae/f3ddae1f36e375791db755a0ac5a7f79.jpg" alt="pochette" />
      <h3>pochette no-yoroi-san</h3>
      <p>pochette no-yoroi-san, gentle knight, loves cute things, sells pajamas. 🧵✨</p>
    </div>
        <div class="card">
      <img src="https://i.pinimg.com/1200x/5f/a5/dc/5fa5dc9f8524d6456c50e429faa8d39c.jpg" alt="labor" />
      <h3>labor no yori-san</h3>
      <p>labor no yori-san assigns work, tangled in momonga’s mischief. 📋😅</p>
    </div>
        <div class="card">
      <img src="https://pbs.twimg.com/profile_images/1914779776247537664/ei13if1__200x200.jpg" alt="ramen" />
      <h3>ramen no yoroi-san</h3>
      <p>ramen no yoroi-san runs “rou” ramen shop; shisa admires him. 🍜❤️</p>
    </div>
  </div>
</section>

<section id="gallery">
  <h2>🎨 chiikawa gallery 🎨</h2>
  <div class="description-text">
    explore our collection of the cutest chiikawa moments and artwork! each image captures the pure joy and magic of our beloved characters ✨
  </div>
  <div class="card-grid">
    <div class="gallery-item">
      <img src="https://i.pinimg.com/736x/05/cc/59/05cc59389787407076f23ba4f46e6827.jpg" alt="chiikawa moment 1" />
      <h4>sweet dreams 💤</h4>
      <p>chiikawa having the most peaceful nap</p>
    </div>
    <div class="gallery-item">
      <img src="https://i.pinimg.com/736x/a8/45/ee/a845ee8476fad85d12f99f2eea2ccd6c.jpg" alt="chiikawa moment 2" />
      <h4>friendship goals 👫</h4>
      <p>the gang hanging out together</p>
    </div>
    <div class="gallery-item">
      <img src="https://i.pinimg.com/736x/d0/e7/0b/d0e70b0d713930a7c9f688468a5044ea.jpg" alt="chiikawa president" />
      <h4>chiikawa with the president 👱‍♂️</h4>
      <p>little chiikawa being held by donald trump</p>
    </div>
    <div class="gallery-item">
      <img src="https://i.pinimg.com/736x/11/d2/0f/11d20fb3de158acfeb1a297eb70b6f98.jpg" alt="chiikawa cooking" />
      <h4>chef chiikawa 👨‍🍳</h4>
      <p>making the cutest little treats</p>
    </div>
  </div>
</section>

<section id="games">
  <h2>🎮 chiikawa mini games 🎮</h2>
  <div class="description-text">
    play adorable mini games with chiikawa and friends! test your memory, creativity, and knowledge in these kawaii challenges ✨
  </div>
  <div class="card-grid">
    <div class="game-item">
      <h3>🧠 memory match game</h3>
      <p>match the chiikawa friends! flip the cards to find pairs 🃏</p>
      <div class="memory-game" id="memoryGame">
        <div class="memory-card" data-card="🐰"></div>
        <div class="memory-card" data-card="🐱"></div>
        <div class="memory-card" data-card="🦦"></div>
        <div class="memory-card" data-card="🦀"></div>
        <div class="memory-card" data-card="🐰"></div>
        <div class="memory-card" data-card="🐱"></div>
        <div class="memory-card" data-card="🦦"></div>
        <div class="memory-card" data-card="🦀"></div>
      </div>
      <button class="game-button" onclick="shuffleMemoryGame()">new game! 🎲</button>
    </div>
    
    <div class="game-item">
      <h3>🧩 chiikawa puzzle</h3>
      <p>arrange the pieces to complete chiikawa's picture! 🖼️</p>
      <div class="puzzle-container" id="puzzleContainer"></div>
      <button class="game-button" onclick="startPuzzleGame()">new puzzle! 🧩</button>
    </div>
    
    <div class="game-item">
      <h3>❓ chiikawa quiz</h3>
      <p>test your knowledge about chiikawa and friends! 🧭</p>
      <div id="quizContainer">
        <div id="quizQuestion">What sound does Chiikawa make?</div>
        <div class="quiz-option" data-index="0">woof woof!</div>
        <div class="quiz-option" data-index="1">meow meow!</div>
        <div class="quiz-option" data-index="2">iya!</div>
        <div class="quiz-option" data-index="3">ribbit ribbit!</div>
      </div>
      <button class="game-button" id="nextQuestionBtn" onclick="nextQuestion()" disabled>next question! ❓</button>
    </div>
    
    <div class="game-item">
      <h3>🎯 click the chiikawa</h3>
      <p>click on chiikawa as fast as you can! how many can you catch? ⚡</p>
      <div style="position: relative; height: 150px; background: #fff0f8; border-radius: 12px; margin: 1rem 0;">
        <div id="clickTarget" style="position: absolute; cursor: pointer; transition: all 0.3s ease;">
          <img src="https://i.pinimg.com/736x/9e/d2/57/9ed25718190fc277a34354760c69a021.jpg" alt="chiikawa" />
        </div>
      </div>
      <div class="catch-score">score: <span id="clickScore">0</span></div>
      <button class="game-button" onclick="startClickGame()">start game! 🎯</button>
    </div>
    
    <div class="game-item">
      <h3>🍬 chiikawa catch</h3>
      <p>catch falling chiikawa characters by clicking them! 🍬</p>
      <div class="catch-container" id="catchContainer"></div>
      <div class="catch-score">caught: <span id="catchScore">0</span></div>
      <button class="game-button" onclick="startCatchGame()">start catching! 🍬</button>
    </div>
  </div>
</section>

<section id="contact">
  <h2>📬 send a note!</h2>
  <form id="contactForm">
    <input type="text" name="name" placeholder="your name" required />
    <input type="email" name="email" placeholder="your email" required />
    <textarea name="message" rows="4" placeholder="your message full of love 💖" required></textarea>
    <button type="submit">send 📬</button>
  </form>
</section>

<footer>
   made with love and hugs by hadidi ✧ chiikawa forever ✧
</footer>

<button id="themeToggle" title="toggle theme">🌙</button>

<script>
  // Intersection Observer for animations
  document.querySelectorAll('section').forEach(section => {
    const observer = new IntersectionObserver(entries => {
      if (entries[0].isIntersecting) {
        section.classList.add('visible');
      }
    }, { threshold: 0.1 });
    observer.observe(section);
  });

  // Theme toggle
  document.getElementById('themeToggle').addEventListener('click', () => {
    document.body.classList.toggle('dark');
    document.getElementById('themeToggle').textContent =
      document.body.classList.contains('dark') ? '☀️' : '🌙';
  });

  // Contact form
  document.getElementById('contactForm').addEventListener('submit', e => {
    e.preventDefault();
    alert('thank you for sending love! 💖');
    e.target.reset();
  });

  // Floating images
  const floatImgs = [
    "https://i.pinimg.com/736x/9a/42/0b/9a420bbfcfe449f8b9423569ce3be741.jpg",
    "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSQMkte9AqU5oDp8CxZ70ErQxdLuhASdTQPGrjP5-Z2s0CZMfMC",
    "https://i.pinimg.com/236x/1c/c5/ab/1cc5ab358bdd8552bc5603c3b72e269c.jpg"
  ];
  let floatInterval;

  function floatCuties() {
    const img = document.createElement("img");
    img.src = floatImgs[Math.floor(Math.random() * floatImgs.length)];
    img.className = "floating-up-img";
    img.style.left = Math.random() * 100 + "vw";
    img.style.top = (Math.random() * 100 + 100) + "vh";
    document.body.appendChild(img);
    img.animate([{ transform: "translateY(0)" }, { transform: "translateY(-200vh)" }], {
      duration: 4000 + Math.random() * 2000,
      easing: "linear"
    }).onfinish = () => img.remove();
  }

  function startFloating() {
    floatInterval = setInterval(floatCuties, 1000);
  }

  function stopFloating() {
    clearInterval(floatInterval);
    document.querySelectorAll('.floating-up-img').forEach(img => img.classList.add('hidden'));
    setTimeout(() => {
      document.querySelectorAll('.floating-up-img').forEach(img => img.remove());
      startFloating();
    }, 5000);
  }

  startFloating();

  // Music system
  const audioTracks = [
    new Audio("https://vgmsite.com/soundtracks/kirby-the-crystal-shards/eqfqqetp/62.%20Unused%20%5B%22Friends%203%22%20from%20Kirby%27s%20Dream%20Land%203%5D.mp3"),
    new Audio("https://vgmsite.com/soundtracks/rainbow-islands-turbografx-16/daygbfpv/02.%20%5BNormal%5D%20Main%20Theme.mp3")
  ];
  let currentTrack = 0;
  let audio = audioTracks[currentTrack];
  audio.loop = false;
  audio.volume = 0.5;

  window.addEventListener('load', () => {
    audio.play().catch(e => {
      console.log('Auto-play blocked by browser policy');
    });
  });

  audio.addEventListener('ended', () => {
    currentTrack = (currentTrack + 1) % audioTracks.length;
    audio = audioTracks[currentTrack];
    audio.volume = document.getElementById('volumeSlider').value;
    audio.play();
  });

  document.getElementById('muteBtn').addEventListener('click', () => {
    if (audio.muted) {
      audio.muted = false;
      document.getElementById('muteBtn').textContent = '🔊';
      document.getElementById('volumeSlider').value = audio.volume;
    } else {
      audio.muted = true;
      document.getElementById('muteBtn').textContent = '🔇';
    }
  });

  document.getElementById('pauseBtn').addEventListener('click', () => {
    if (audio.paused) {
      audio.play();
      document.getElementById('pauseBtn').textContent = '⏸️';
    } else {
      audio.pause();
      document.getElementById('pauseBtn').textContent = '▶️';
    }
  });

  document.getElementById('volumeSlider').addEventListener('input', () => {
    audio.volume = document.getElementById('volumeSlider').value;
    audio.muted = false;
    document.getElementById('muteBtn').textContent = '🔊';
  });

  // Game Functions
  let memoryCards = [];
  let flippedCards = [];
  let clickScore = 0;
  let clickGameActive = false;
  let currentQuestionIndex = 0;
  let puzzlePieces = [];
  let catchScore = 0;
  let catchGameActive = false;
  let emptyPosition = 8;

  const quizQuestions = [
    // Easy
    {
      question: "What sound does Chiikawa make?",
      options: ["woof woof!", "meow meow!", "iya!", "ribbit ribbit!"],
      correct: 2
    },
    {
      question: "What color is Hachiware?",
      options: ["pink", "blue and white", "blue", "yellow"],
      correct: 1
    },
    {
      question: "What animal is Usagi?",
      options: ["cat", "dog", "rabbit", "bear"],
      correct: 2
    },
    // Medium
    {
      question: "What is Hachiware known for loving?",
      options: ["ramen", "singing", "napping", "dancing"],
      correct: 1
    },
    {
      question: "Who is Chiikawa's best friend?",
      options: ["Usagi", "Kani", "Hachiware", "Momonga"],
      correct: 2
    },
    {
      question: "What does Kuri Manjū resemble?",
      options: ["a crab", "a chestnut bun", "a lion", "an otter"],
      correct: 1
    },
    {
      question: "What is Shisa's favorite food?",
      options: ["sushi", "ramen", "cake", "pizza"],
      correct: 1
    },
    // Hard
    {
      question: "In which year was the Chiikawa manga first published?",
      options: ["2018", "2020", "2022", "2016"],
      correct: 1
    },
    {
      question: "Which studio produces the Chiikawa anime?",
      options: ["Studio Ghibli", "Doga Kobo", "Toei Animation", "MAPPA"],
      correct: 1
    },
    {
      question: "What is the name of the forest where Chiikawa and friends live?",
      options: ["Kawaii Forest", "Chiikawa Forest", "Happy Woods", "Glitter Grove"],
      correct: 1
    }
  ];

  // Memory Game
  function shuffleMemoryGame() {
    const cards = document.querySelectorAll('.memory-card');
    const emojis = ['🐰', '🐱', '🦦', '🦀', '🐰', '🐱', '🦦', '🦀'];
    const shuffled = emojis.sort(() => Math.random() - 0.5);
    memoryCards = [];
    flippedCards = [];

    cards.forEach((card, index) => {
      card.textContent = '';
      card.classList.remove('flipped', 'matched');
      card.dataset.card = shuffled[index];
      card.style.pointerEvents = 'auto';
      card.removeEventListener('click', flipCard);
      card.addEventListener('click', () => flipCard(card));
      memoryCards.push(card);
    });
  }

  function flipCard(card) {
    if (flippedCards.length >= 2 || card.classList.contains('flipped') || card.classList.contains('matched')) {
      return;
    }

    card.classList.add('flipped');
    card.textContent = card.dataset.card;
    flippedCards.push(card);

    if (flippedCards.length === 2) {
      const [card1, card2] = flippedCards;
      if (card1.dataset.card === card2.dataset.card) {
        card1.classList.add('matched');
        card2.classList.add('matched');
        card1.style.pointerEvents = 'none';
        card2.style.pointerEvents = 'none';
        flippedCards = [];
        checkMemoryGameComplete();
      } else {
        setTimeout(() => {
          card1.classList.remove('flipped');
          card2.classList.remove('flipped');
          card1.textContent = '';
          card2.textContent = '';
          flippedCards = [];
        }, 1000);
      }
    }
  }

  function checkMemoryGameComplete() {
    const allMatched = Array.from(document.querySelectorAll('.memory-card')).every(card => card.classList.contains('matched'));
    if (allMatched) {
      setTimeout(() => alert('Memory game completed! 🎉'), 500);
    }
  }

  // Puzzle Game
  function startPuzzleGame() {
    const container = document.getElementById('puzzleContainer');
    container.innerHTML = '';
    const correctOrder = [0, 1, 2, 3, 4, 5, 6, 7, 8];
    const shuffledOrder = [...correctOrder].sort(() => Math.random() - 0.5);
    puzzlePieces = [];
    emptyPosition = shuffledOrder.indexOf(8);

    shuffledOrder.forEach((position, index) => {
      const piece = document.createElement('div');
      piece.className = 'puzzle-piece';
      piece.dataset.position = index;
      piece.dataset.correct = position;
      if (position !== 8) {
        piece.style.backgroundImage = 'url(https://i.pinimg.com/736x/11/d2/0f/11d20fb3de158acfeb1a297eb70b6f98.jpg)';
        piece.style.backgroundPosition = `${-(position % 3) * 100}px ${-Math.floor(position / 3) * 100}px`;
      } else {
        piece.classList.add('empty');
      }
      piece.addEventListener('click', () => swapPuzzlePiece(piece));
      container.appendChild(piece);
      puzzlePieces.push(piece);
    });

    checkPuzzleComplete();
  }

  function swapPuzzlePiece(piece) {
    const pieceIndex = parseInt(piece.dataset.position);
    const validMoves = {
      0: [1, 3], 1: [0, 2, 4], 2: [1, 5],
      3: [0, 4, 6], 4: [1, 3, 5, 7], 5: [2, 4, 8],
      6: [3, 7], 7: [4, 6, 8], 8: [5, 7]
    };

    if (validMoves[pieceIndex].includes(emptyPosition)) {
      const emptyPiece = puzzlePieces[emptyPosition];
      const piecePos = piece.dataset.correct;
      const emptyPos = emptyPiece.dataset.correct;

      piece.dataset.correct = emptyPos;
      emptyPiece.dataset.correct = piecePos;

      piece.dataset.position = emptyPosition;
      emptyPiece.dataset.position = pieceIndex;

      if (piecePos !== '8') {
        piece.style.backgroundImage = 'url(https://i.pinimg.com/736x/11/d2/0f/11d20fb3de158acfeb1a297eb70b6f98.jpg)';
        piece.style.backgroundPosition = `${-(parseInt(emptyPos) % 3) * 100}px ${-Math.floor(parseInt(emptyPos) / 3) * 100}px`;
      } else {
        piece.classList.add('empty');
        piece.style.backgroundImage = 'none';
      }

      if (emptyPos !== '8') {
        emptyPiece.style.backgroundImage = 'url(https://i.pinimg.com/736x/11/d2/0f/11d20fb3de158acfeb1a297eb70b6f98.jpg)';
        emptyPiece.style.backgroundPosition = `${-(parseInt(piecePos) % 3) * 100}px ${-Math.floor(parseInt(piecePos) / 3) * 100}px`;
        emptyPiece.classList.remove('empty');
      } else {
        emptyPiece.classList.add('empty');
        emptyPiece.style.backgroundImage = 'none';
      }

      emptyPosition = pieceIndex;
      checkPuzzleComplete();
    }
  }

  function checkPuzzleComplete() {
    const pieces = document.querySelectorAll('.puzzle-piece');
    let isComplete = true;
    pieces.forEach(piece => {
      if (piece.dataset.position !== piece.dataset.correct) {
        isComplete = false;
      }
      piece.classList.remove('correct');
    });
    if (isComplete) {
      pieces.forEach(piece => piece.classList.add('correct'));
      setTimeout(() => alert('Puzzle completed! 🎉'), 500);
    }
  }

  // Quiz Game
  function checkAnswer(option) {
    const options = document.querySelectorAll('.quiz-option');
    const selectedIndex = parseInt(option.dataset.index);
    const correctIndex = quizQuestions[currentQuestionIndex].correct;

    options.forEach(opt => opt.style.pointerEvents = 'none');

    if (selectedIndex === correctIndex) {
      option.classList.add('correct');
      document.getElementById('nextQuestionBtn').disabled = false;
    } else {
      option.classList.add('wrong');
    }

    setTimeout(() => {
      options.forEach(opt => {
        opt.classList.remove('correct', 'wrong');
        opt.style.pointerEvents = 'auto';
      });
    }, 1500);
  }

  function nextQuestion() {
    currentQuestionIndex = (currentQuestionIndex + 1) % quizQuestions.length;
    const question = quizQuestions[currentQuestionIndex];
    document.getElementById('quizQuestion').textContent = question.question;

    const options = document.querySelectorAll('.quiz-option');
    options.forEach((option, index) => {
      option.textContent = question.options[index];
      option.dataset.index = index;
      option.removeEventListener('click', checkAnswer);
      option.addEventListener('click', () => checkAnswer(option));
    });
    document.getElementById('nextQuestionBtn').disabled = true;
  }

  // Click Game
  function startClickGame() {
    clickScore = 0;
    clickGameActive = true;
    document.getElementById('clickScore').textContent = clickScore;
    stopFloating();
    const target = document.getElementById('clickTarget');
    target.style.display = 'block';
    moveTarget();

    setTimeout(() => {
      clickGameActive = false;
      target.style.display = 'none';
      alert(`Game over! You scored ${clickScore} points! 🎉`);
      startFloating();
    }, 15000);
  }

  function moveTarget() {
    if (!clickGameActive) return;

    const target = document.getElementById('clickTarget');
    const container = target.parentElement;
    const maxX = container.offsetWidth - 40;
    const maxY = container.offsetHeight - 40;

    target.style.left = Math.random() * maxX + 'px';
    target.style.top = Math.random() * maxY + 'px';

    target.onclick = () => {
      if (clickGameActive) {
        clickScore++;
        document.getElementById('clickScore').textContent = clickScore;
        stopFloating();
        moveTarget();
      }
    };

    setTimeout(moveTarget, 1000);
  }

  // Catch Game
  function startCatchGame() {
    catchScore = 0;
    catchGameActive = true;
    document.getElementById('catchScore').textContent = catchScore;
    document.getElementById('catchContainer').innerHTML = '';
    stopFloating();
    spawnCatchCharacter();

    setTimeout(() => {
      catchGameActive = false;
      document.querySelectorAll('.catch-character').forEach(char => char.remove());
      alert(`Game over! You caught ${catchScore} Chiikawas! 🍬`);
      startFloating();
    }, 15000);
  }

  function spawnCatchCharacter() {
    if (!catchGameActive) return;
    const container = document.getElementById('catchContainer');
    const character = document.createElement('div');
    character.className = 'catch-character';
    character.style.left = Math.random() * (container.offsetWidth - 40) + 'px';
    character.style.top = '-40px';
    character.innerHTML = '<img src="https://i.pinimg.com/736x/28/de/fd/28defddafeefbe7e8b61c5799744c0a5.jpg" alt="chiikawa" />';
    container.appendChild(character);

    character.animate([
      { transform: 'translateY(0)' },
      { transform: `translateY(${container.offsetHeight + 40}px)` }
    ], {
      duration: 3000 + Math.random() * 2000,
      easing: 'linear'
    }).onfinish = () => character.remove();

    character.addEventListener('click', () => {
      if (catchGameActive) {
        catchScore++;
        document.getElementById('catchScore').textContent = catchScore;
        character.remove();
      }
    });

    setTimeout(spawnCatchCharacter, 1000);
  }

  // Initialize games
  shuffleMemoryGame();
  startPuzzleGame();
  document.getElementById('clickTarget').style.left = '50px';
  document.getElementById('clickTarget').style.top = '50px';

  // Initialize quiz with correct options
  const initialQuestion = quizQuestions[0];
  document.getElementById('quizQuestion').textContent = initialQuestion.question;
  const quizOptions = document.querySelectorAll('.quiz-option');
  quizOptions.forEach((option, index) => {
    option.textContent = initialQuestion.options[index];
    option.dataset.index = index;
    option.addEventListener('click', () => checkAnswer(option));
  });
</script>
</body>
</html>
